(function(e){function t(t){for(var n,o,s=t[0],c=t[1],u=t[2],d=0,h=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&h.push(i[o][0]),i[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);l&&l(t);while(h.length)h.shift()();return a.push.apply(a,u||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,s=1;s<r.length;s++){var c=r[s];0!==i[c]&&(n=!1)}n&&(a.splice(t--,1),e=o(o.s=r[0]))}return e}var n={},i={app:0},a=[];function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/discovery-queryview/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=c;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("cd49")},"0538":function(e,t,r){},1:function(e,t){},1313:function(e,t,r){"use strict";r("bc6c")},2:function(e,t){},2850:function(e,t,r){"use strict";r("0538")},3:function(e,t){},4:function(e,t){},"4a3f":function(e,t,r){},5:function(e,t){},6:function(e,t){},"67ff":function(e,t,r){"use strict";r("4a3f")},7:function(e,t){},"8a23":function(e,t,r){},"8ee3":function(e,t,r){"use strict";r("d0cb")},"94cad":function(e,t,r){},"9ac1":function(e,t,r){"use strict";r("8a23")},bc6c:function(e,t,r){},cd49:function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("7a23"),i={class:"navbar navbar-expand-lg navbar-light bg-light"},a={class:"container-fluid"},o={class:"collapse navbar-collapse"},s={class:"btn-group",role:"group","aria-label":"tools graph"},c={key:1,type:"button",class:"form-control btn btn-primary disabled","data-toggle":"tooltip","data-placement":"bottom",title:"Undo last action, go back.",disabled:""},u={key:3,type:"button",class:"form-control btn btn-primary disabled","data-toggle":"tooltip","data-placement":"bottom",title:"Retrieve the canceled action, go forward.",disabled:""},l=Object(n["createElementVNode"])("div",{class:"card-footer"},[Object(n["createElementVNode"])("a",{href:"https://github.com/p2m2/askomics-queryview",target:"_blank"},"beta-0.0.3"),Object(n["createElementVNode"])("br"),Object(n["createElementVNode"])("a",{href:"https://p2m2.github.io/discovery/",target:"_blank"},"@p2m2/discovery")],-1);function d(e,t,r,d,h,f){var p=Object(n["resolveComponent"])("font-awesome-icon"),b=Object(n["resolveComponent"])("router-view");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[Object(n["createElementVNode"])("nav",i,[Object(n["createElementVNode"])("div",a,[Object(n["createElementVNode"])("div",o,[Object(n["createElementVNode"])("div",s,[Object(n["createElementVNode"])("button",{type:"button",class:"form-control btn btn-primary","data-toggle":"tooltip","data-placement":"bottom",title:"SPARQL Endpoint/RDF Files/ Query Builder Confiuration.",onClick:t[0]||(t[0]=function(){return e.configuration&&e.configuration.apply(e,arguments)})},[Object(n["createVNode"])(p,{icon:"sliders-h"})]),e.backwardActive?(Object(n["openBlock"])(),Object(n["createElementBlock"])("button",{key:0,type:"button",class:"form-control btn btn-primary",onClick:t[1]||(t[1]=function(){return e.back&&e.back.apply(e,arguments)}),"data-toggle":"tooltip","data-placement":"bottom",title:"Undo last action, go back."},[Object(n["createVNode"])(p,{icon:"backward"})])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("button",c,[Object(n["createVNode"])(p,{icon:"backward"})])),e.forwardActive?(Object(n["openBlock"])(),Object(n["createElementBlock"])("button",{key:2,type:"button",class:"form-control btn btn-primary",onClick:t[2]||(t[2]=function(){return e.forward&&e.forward.apply(e,arguments)}),"data-toggle":"tooltip","data-placement":"bottom",title:"Retrieve the canceled action, go forward."},[Object(n["createVNode"])(p,{icon:"forward"})])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("button",u,[Object(n["createVNode"])(p,{icon:"forward"})])),Object(n["createElementVNode"])("button",{type:"button",class:"form-control btn btn-primary",onClick:t[3]||(t[3]=function(){return e.builder&&e.builder.apply(e,arguments)}),"data-toggle":"tooltip","data-placement":"bottom",title:"Build the query."},[Object(n["createVNode"])(p,{icon:"project-diagram"})]),Object(n["createElementVNode"])("button",{type:"button",class:"form-control btn btn-primary",onClick:t[4]||(t[4]=function(){return e.getResults&&e.getResults.apply(e,arguments)}),"data-toggle":"tooltip","data-placement":"bottom",title:"Display the query results."},[Object(n["createVNode"])(p,{icon:"poll"})]),Object(n["createElementVNode"])("button",{type:"button",class:"form-control btn btn-info",onClick:t[5]||(t[5]=function(){return e.console&&e.console.apply(e,arguments)}),"data-toggle":"tooltip","data-placement":"bottom",title:"Information about the current query (discovery internal state)."},[Object(n["createVNode"])(p,{icon:"terminal"})]),Object(n["createElementVNode"])("button",{type:"button",class:"form-control btn btn-success",onClick:t[6]||(t[6]=function(){return e.copyPermalinkQueryBuilderToClipBoard&&e.copyPermalinkQueryBuilderToClipBoard.apply(e,arguments)}),"data-toggle":"tooltip","data-placement":"bottom",title:"Copy a permalink to save the current query."},[Object(n["createVNode"])(p,{icon:"clipboard-list"})]),Object(n["createElementVNode"])("button",{type:"button",class:"form-control btn btn-danger",onClick:t[7]||(t[7]=function(){return e.clear&&e.clear.apply(e,arguments)}),"data-toggle":"tooltip","data-placement":"bottom",title:"Delete the current request and start a new session."},"Clear")])])])]),Object(n["createVNode"])(b,{onUpdateRequestManager:t[8]||(t[8]=function(t){return e.requestManagerStringify=t})}),l],64)}var h,f,p,b,g,y=r("d4ec"),m=r("262e"),v=r("2caf"),O=(r("d81d"),r("ac1f"),r("841c"),r("d3b7"),r("3ca3"),r("ddb0"),r("2b3d"),r("5319"),r("9ab4")),S=r("ce1f"),j=r("bee2"),k=(r("498a"),r("1276"),r("b680"),r("25f0"),function(){function e(){Object(y["a"])(this,e)}return Object(j["a"])(e,null,[{key:"isUrl",value:function(e){var t=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;return t.test(e)}},{key:"truncate",value:function(e,t){return e.length>t?e.substring(0,t)+"...":e}},{key:"splitUrl",value:function(e){var t=e.split("/"),r=t[t.length-1],n=r.split("#");return decodeURI(n[n.length-1])}},{key:"humanFileSize",value:function(e,t){var r=t?1e3:1024;if(Math.abs(e)<r)return e+" B";var n=t?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],i=-1;do{e/=r,++i}while(Math.abs(e)>=r&&i<n.length-1);return e.toFixed(1)+" "+n[i]}},{key:"humanDate",value:function(e){var t=new Date(1e3*e);return t.toUTCString()}},{key:"stringToHexColor",value:function(e){for(var t=0,r=0;r<e.length;r++)t=e.charCodeAt(r)+((t<<5)-t);var n=(16777215&t).toString(16).toUpperCase(),i="#"+"00000".substring(0,6-n.length)+n;return i}},{key:"isDarkColor",value:function(e){var t=e.substring(1),r=parseInt(t,16),n=r>>16&255,i=r>>8&255,a=r>>0&255,o=.2126*n+.7152*i+.0722*a;return o<128}}]),e}()),E=function(){function e(t,r,n,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";Object(y["a"])(this,e),this.visible=!1,this.negative=!1,this.linked=!1,this.filterValue="",this.operator=h.CONTAINS,this.id=t,this.order=r,this.uri=n,this.label=""==a?k.splitUrl(n):a,this.range=i.trim().replace("http://www.w3.org/2001/XMLSchema#","xsd:")}return Object(j["a"])(e,[{key:"getObject",value:function(){return{id:this.id,order:this.order,uri:this.uri,label:this.label,range:this.range,visible:this.visible,negative:this.negative,linked:this.linked,filterValue:this.filterValue,operator:this.operator}}},{key:"clean",value:function(){return this.visible=!1,this.negative=!1,this.linked=!1,this.filterValue="",this.operator=h.UNDEFINED,"xsd:string"==this.range||"uri"==this.range?this.operator=h.CONTAINS:"xsd:numeric"!=this.range&&"xsd:integer"!=this.range&&"xsd:double"!=this.range&&"xsd:float"!=this.range||(this.operator=h.EQUAL),this}}],[{key:"from",value:function(t){var r=new e(t.id,t.order,t.uri,t.range,t.label);return r.visible=t.visible,r.negative=t.negative,r.linked=t.linked,r.filterValue=t.filterValue,r.operator=t.operator,r}}]),e}();(function(e){e[e["UNDEFINED"]=0]="UNDEFINED",e[e["STREQUAL"]=1]="STREQUAL",e[e["CONTAINS"]=2]="CONTAINS",e[e["STRSTARTS"]=3]="STRSTARTS",e[e["STRENDS"]=4]="STRENDS",e[e["EQUAL"]=5]="EQUAL",e[e["NOTEQUAL"]=6]="NOTEQUAL",e[e["INF"]=7]="INF",e[e["INFEQUAL"]=8]="INFEQUAL",e[e["SUP"]=9]="SUP",e[e["SUPEQUAL"]=10]="SUPEQUAL"})(h||(h={})),function(e){e[e["SOMETHING"]=0]="SOMETHING",e[e["FORWARD_ENTITY"]=1]="FORWARD_ENTITY",e[e["BACKWARD_ENTITY"]=2]="BACKWARD_ENTITY"}(f||(f={})),function(e){e[e["FORWARD_PROPERTY"]=0]="FORWARD_PROPERTY",e[e["BACKWARD_PROPERTY"]=1]="BACKWARD_PROPERTY",e[e["IS_A"]=2]="IS_A"}(p||(p={})),function(e){e[e["SUGGESTED"]=0]="SUGGESTED",e[e["CONCRETE"]=1]="CONCRETE",e[e["SELECTED"]=2]="SELECTED"}(b||(b={})),function(e){e[e["TO"]=0]="TO",e[e["IS_A"]=1]="IS_A",e[e["FROM"]=2]="FROM",e[e["ALL"]=3]="ALL"}(g||(g={}));var w=function(){function e(t){Object(y["a"])(this,e),this.url="",this.file="",this.content="",this.mimetype="application/sparql-query",this.method="POST",this.strategy="data-driven",this.logLevel="info",this.pageSize=10,this.batchProcessing=10,this.cache=!0,this.id=t}return Object(j["a"])(e,[{key:"remoteAccess",value:function(){if(this.url.length>0)return'"url" : "'+this.url+'"';if(this.file.length>0)return'"file" : "'+this.file+'"';if(this.content.length>0)return'"content" : "'+this.content+'"';throw Error("url|file|content should bed defined.")}},{key:"methodAcess",value:function(){return this.method&&this.method,""}},{key:"jsonConfigurationSWDiscoveryString",value:function(){var e=this.methodAcess();return e.length>0&&(e+=",\n"),'{\n            "sources" : [{\n            "id"  : "__id__",\n'+this.remoteAccess()+",\n"+e+'"mimetype" : "'+this.mimetype+'"}],\n            "settings" : {\n                "cache" : '+this.cache+',\n                "logLevel" : "'+this.logLevel+'",\n                "sizeBatchProcessing" :  '+this.batchProcessing+',\n                "pageSize" : '+this.pageSize+"\n            }\n        }"}}],[{key:"build",value:function(t){var r=new e(t.id);return t.url&&(r.url=t.url),t.file&&(r.file=t.file),t.content&&(r.content=t.content),t.mimetype&&(r.mimetype=t.mimetype),t.method&&(r.method=t.method),t.strategy&&(r.strategy=t.strategy),t.logLevel&&(r.logLevel=t.logLevel),t.pageSize&&(r.pageSize=t.pageSize),t.batchProcessing&&(r.batchProcessing=t.batchProcessing),t.cache&&(r.cache=t.cache),r}}]),e}(),N=function(){function e(t,r){Object(y["a"])(this,e),this.uri="",this.label="",this.x=375+e.randomInteger(e.min,e.max),this.y=225+e.randomInteger(e.min,e.max),this.id=String(e.idCounter++),this.uri=t,this.state_n=b.SUGGESTED,r.length>0?this.label=r:this.label=k.splitUrl(t)}return Object(j["a"])(e,[{key:"isSuggested",value:function(){return this.state_n==b.SUGGESTED}},{key:"isConcrete",value:function(){return this.state_n==b.CONCRETE}},{key:"isSelected",value:function(){return this.state_n==b.SELECTED}},{key:"setSuggested",value:function(){this.state_n=b.SUGGESTED}},{key:"setConcrete",value:function(){this.state_n=b.CONCRETE}},{key:"setSelected",value:function(){this.state_n=b.SELECTED}},{key:"getObject",value:function(){return Object.assign({},this)}}],[{key:"randomInteger",value:function(e,t){return Math.floor(Math.random()*(t-e+1))+e}}]),e}();N.min=-4,N.max=4,N.idCounter=0;var D,C=function(e){Object(m["a"])(r,e);var t=Object(v["a"])(r);function r(e,n,i){var a;return Object(y["a"])(this,r),a=t.call(this,e,n),a.type=i,a.focus="",a}return Object(j["a"])(r,null,[{key:"something",value:function(e,t){var n=new r("something","Something",f.SOMETHING);return n.type=f.SOMETHING,n.state_n=e,n.focus=t,n}}]),r}(N),R=function(e){Object(m["a"])(r,e);var t=Object(v["a"])(r);function r(e,n,i,a,o){var s;return Object(y["a"])(this,r),s=t.call(this,e,n),s.vx=0,s.vy=0,s.type=i,s.source=a,s.target=o,s}return r}(N);(function(e){e[e["XSD_UNKNOWN"]=0]="XSD_UNKNOWN",e[e["XSD_NUMERIC"]=1]="XSD_NUMERIC",e[e["XSD_BOOLEAN"]=2]="XSD_BOOLEAN",e[e["XSD_STRING"]=3]="XSD_STRING"})(D||(D={}));var B=r("6c02");function x(e,t,r,i,a,o){var s=Object(n["resolveComponent"])("QueryBuilderPanel");return Object(n["openBlock"])(),Object(n["createBlock"])(s,{requestString:e.requestString,"onUpdate:requestString":t[0]||(t[0]=function(t){return e.requestString=t}),onUpdateRequestManager:e.updateRequestString},null,8,["requestString","onUpdateRequestManager"])}var q={id:"askomics-panel"},T={class:"container"},V=Object(n["createElementVNode"])("hr",null,null,-1),A=Object(n["createElementVNode"])("br",null,null,-1),P={class:"row"},M={class:"col col-xs-7"},L={class:"col col-xs-5"},U={class:"row"},_={class:"col"},I={key:1,class:"progress"};function F(e,t,r,i,a,o){var s=Object(n["resolveComponent"])("QueryGraphPanel"),c=Object(n["resolveComponent"])("AttributesPanel"),u=Object(n["resolveComponent"])("font-awesome-icon");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",q,[Object(n["createElementVNode"])("div",T,[V,A,Object(n["createElementVNode"])("div",P,[Object(n["createElementVNode"])("div",M,[Object(n["createVNode"])(s,{requestString:e.currentQuery,"onUpdate:requestString":t[0]||(t[0]=function(t){return e.currentQuery=t}),filterProperty:e.filterProperty,"onUpdate:filterProperty":t[1]||(t[1]=function(t){return e.filterProperty=t}),onUpdateRequestManager:e.updateQuery,onRequestManagerBusy:t[2]||(t[2]=function(t){return e.requestBusy=JSON.parse(t)}),onRequestManagerBusyPercent:t[3]||(t[3]=function(t){return e.requestBusyPercent=JSON.stringify(100*JSON.parse(t))}),onRequestManagerBusyEvent:e.requestBusyEvent,width:750,height:450},null,8,["requestString","filterProperty","onUpdateRequestManager","onRequestManagerBusyEvent"])]),Object(n["createElementVNode"])("div",L,[Object(n["createVNode"])(c,{requestString:e.currentQuery,"onUpdate:requestString":t[4]||(t[4]=function(t){return e.currentQuery=t}),onUpdateRequestManager:e.updateQuery,onUpdateFilterProperty:t[5]||(t[5]=function(t){return e.filterProperty=JSON.parse(t)}),width:450,height:450},null,8,["requestString","onUpdateRequestManager"])])]),Object(n["createElementVNode"])("div",U,[Object(n["createElementVNode"])("div",_,[e.requestBusy?(Object(n["openBlock"])(),Object(n["createBlock"])(u,{key:0,icon:"spinner",size:"2x",spin:""})):Object(n["createCommentVNode"])("",!0),e.requestBusy?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",I,[Object(n["createElementVNode"])("div",{class:"progress-bar",role:"progressbar",style:Object(n["normalizeStyle"])("width: "+e.requestBusyPercent+"%"),"aria-valuenow":"100","aria-valuemin":"0","aria-valuemax":"100"},Object(n["toDisplayString"])(e.requestBusyPercent)+" "+Object(n["toDisplayString"])(e.requestBusyEvent),5)])):Object(n["createCommentVNode"])("",!0)])])])])}r("ab8b");var G=r("ecee"),W=r("c074"),z=r("ad3d"),Q=["width","height"];function J(e,t,r,i,a,o){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{id:"query-graph-panel",class:Object(n["normalizeClass"])(e.canvasClass)},[Object(n["createElementVNode"])("canvas",{id:"canvas-askomics-graph",width:e.width,height:e.height,disabled:""},null,8,Q)],2)}var $,Y=r("b85c"),K=(r("a9e3"),r("4de4"),r("c740"),r("159b"),r("7db0"),r("99af"),r("cb29"),r("898b")),X=r("2909"),H=r("3835"),Z=(r("4ec9"),r("fb6a"),r("5db7"),r("73d9"),r("caad"),r("2532"),r("664f"),r("b64b"),r("4fad"),r("0481"),r("6062"),r("c527")),ee=function(){function e(){Object(y["a"])(this,e)}return Object(j["a"])(e,[{key:"getDatatypesWithProperty",value:function(e,t){return new Promise((function(r,n){Object(Z["SWDiscovery"])(Z["SWDiscoveryConfiguration"].setConfigString(e)).something().isSubjectOf(new Z["URI"](t),"valueL").select("valueL").limit(5).commit().raw().then((function(e){try{var i=Object(X["a"])(new Set(e.results.bindings.map((function(e){return e["valueL"].datatype}))));i[0]?r([t,i[0]]):r([t,"xsd:string"])}catch(a){n(a)}}))}))}},{key:"getDatatypes",value:function(e,t){var r=this,n=Object(X["a"])(new Set(t)),i=new Map;return new Promise((function(t,a){Promise.all(n.map((function(t){return r.getDatatypesWithProperty(e,t)}))).then((function(e){e.map((function(e){return i.set(e[0],e[1])})),t(i)})).catch((function(e){a(e)}))}))}}]),e}(),te=function(e){Object(m["a"])(r,e);var t=Object(v["a"])(r);function r(){var e;return Object(y["a"])(this,r),e=t.call(this),e.askomics_prefix="http://askomics.org/internal/",console.log(" ============ StrategyRequestAskOmics ============ "),e}return Object(j["a"])(r,[{key:"attributeList",value:function(e,t){return e.focus(t).isSubjectOf(new Z["URI"]("rdf:type"),"typeFocus").isObjectOf(new Z["URI"]("rdfs:domain"),"property").isA("owl:DatatypeProperty").datatype(new Z["URI"]("http://www.w3.org/2000/01/rdf-schema#label"),"labelProperty").isSubjectOf(new Z["URI"]("rdfs:range"),"range")}},{key:"forwardEntities",value:function(e,t,r){var n=new Z["SWDiscovery"](Z["SWDiscoveryConfiguration"].setConfigString(t)).something();return r.type!=f.SOMETHING&&(n=n.set(new Z["URI"](r.uri))),n.isObjectOf(new Z["URI"]("rdfs:domain"),"property").isA(this.askomics_prefix+"AskomicsRelation").datatype(new Z["URI"]("http://www.w3.org/2000/01/rdf-schema#label"),"labelProperty").isSubjectOf(new Z["URI"]("rdfs:range"),"entity").datatype(new Z["URI"]("http://www.w3.org/2000/01/rdf-schema#label"),"labelEntity")}},{key:"backwardEntities",value:function(e,t,r){var n=new Z["SWDiscovery"](Z["SWDiscoveryConfiguration"].setConfigString(t)).something();return r.type!=f.SOMETHING&&(n=n.set(new Z["URI"](r.uri))),n.isObjectOf(new Z["URI"]("rdfs:range"),"property").isA(this.askomics_prefix+"AskomicsRelation").datatype(new Z["URI"]("http://www.w3.org/2000/01/rdf-schema#label"),"labelProperty").isSubjectOf(new Z["URI"]("rdfs:domain"),"entity").datatype(new Z["URI"]("http://www.w3.org/2000/01/rdf-schema#label"),"labelEntity")}}]),r}(ee),re=function(e){Object(m["a"])(r,e);var t=Object(v["a"])(r);function r(){return Object(y["a"])(this,r),t.call(this)}return Object(j["a"])(r,[{key:"attributeList",value:function(e,t){return e.focus(t).isLinkTo(new Z["QueryVariable"]("value"),"property").root().something("value").filter.isLiteral.focus("property").datatype(new Z["URI"]("rdfs:label"),"labelProperty").filter.not.strStarts(new Z["Literal"]("http://www.openlinksw.com/"))}},{key:"forwardEntities",value:function(e,t,r){return e.isSubjectOf(new Z["QueryVariable"]("property")).isSubjectOf(new Z["URI"]("rdf:type"),"entity").filter.not.strStarts(new Z["Literal"]("http://www.openlinksw.com/")).datatype(new Z["URI"]("rdfs:label"),"labelEntity").focus("property").filter.not.strStarts(new Z["Literal"]("http://www.w3.org/2002/07/owl#")).filter.not.strStarts(new Z["Literal"]("http://www.w3.org/1999/02/22-rdf-syntax-ns#")).filter.not.strStarts(new Z["Literal"]("http://www.w3.org/2000/01/rdf-schema#")).filter.not.strStarts(new Z["Literal"]("http://www.openlinksw.com/")).datatype(new Z["URI"]("rdfs:label"),"labelProperty")}},{key:"backwardEntities",value:function(e,t,r){return e.filter.isUri.isObjectOf(new Z["QueryVariable"]("property")).isSubjectOf(new Z["URI"]("rdf:type"),"entity").filter.not.strStarts(new Z["Literal"]("http://www.openlinksw.com/")).datatype(new Z["URI"]("rdfs:label"),"labelEntity").focus("property").filter.not.strStarts(new Z["Literal"]("http://www.w3.org/2002/07/owl#")).filter.not.strStarts(new Z["Literal"]("http://www.w3.org/1999/02/22-rdf-syntax-ns#")).filter.not.strStarts(new Z["Literal"]("http://www.w3.org/2000/01/rdf-schema#")).filter.not.strStarts(new Z["Literal"]("http://www.openlinksw.com/")).filter.not.strStarts(new Z["Literal"]("http://www.openlinksw.com/")).datatype(new Z["URI"]("rdfs:label"),"labelProperty")}}]),r}(ee);function ne(e){var t=$.get(e);return t||new Z["SWDiscovery"]}var ie=[],ae=-1,oe=function(){function e(t,r){Object(y["a"])(this,e),this.id=e.idCounter++,this.strategy_str="",this.strategy=new re,this.discovery=null,$||($=new Map),this.vue=r,this.parse(t)}return Object(j["a"])(e,[{key:"parse",value:function(e){if(!e||e.length<=0)throw new Error("Non string to parse !");e&&e.length>0?this.setDiscovery(Object(Z["SWDiscovery"])().setSerializedString(e)):this.clear(),this.setConfiguration(this.getConfiguration())}},{key:"serialized",value:function(){return this.getDiscovery().getSerializedString()}},{key:"clear",value:function(){var t=this.getConfiguration();this.setDiscovery(Object(Z["SWDiscovery"])(Z["SWDiscoveryConfiguration"].setConfigString(t.jsonConfigurationSWDiscoveryString())).root().setDecoration("configuration",JSON.stringify(t)).setDecoration("graph",JSON.stringify(e.defaultGraph("start"))).something("start").setDecoration("label","Something").setDecoration("attributes",JSON.stringify({})).root()),ie=[],ae=-1,this.push()}},{key:"setConfiguration",value:function(e){var t=this.getDiscovery().focus();switch(this.setDiscovery(this.getDiscovery().setConfig(Z["SWDiscoveryConfiguration"].setConfigString(e.jsonConfigurationSWDiscoveryString())).root().setDecoration("configuration",JSON.stringify(e)).focus(t)),e.strategy){case"askomics":this.strategy=new te;break;case"data-driven":this.strategy=new re;break;default:console.warn("strategy unknown : "+this.strategy_str),this.strategy=new re}}},{key:"getConfiguration",value:function(){return w.build(JSON.parse(this.getDiscovery().root().getDecoration("configuration")))}},{key:"push",value:function(){ae>0&&(ie=ie.slice(0,ae+1));var t=new e(this.serialized(),this.vue),r=t.getGraph();r.nodes=r.nodes.filter((function(e){return e.state_n==b.CONCRETE||e.state_n==b.SELECTED})).map((function(e){return e.state_n=b.CONCRETE,e})),r.links=r.links.filter((function(e){return e.state_n==b.CONCRETE||e.state_n==b.SELECTED})).map((function(e){return e.state_n=b.CONCRETE,e})),t.setGraph(r),ae=ie.push(t.serialized())-1}},{key:"setGraph",value:function(e){var t=this.getDiscovery().focus();this.setDiscovery(this.getDiscovery().root().setDecoration("graph",JSON.stringify(e)).focus(t)),this.vue.$emit("updateRequestManager",this.serialized())}},{key:"getGraph",value:function(){return JSON.parse(this.getDiscovery().root().getDecoration("graph"))}},{key:"setDiscovery",value:function(e){$.set(this.id,e)}},{key:"getDiscovery",value:function(){return ne(this.id)}},{key:"setNewNodeWithLink",value:function(e,t){var r=t.source==e.id?t.source:t.target,n=this.getGraph().nodes.filter((function(e){return e.id==r})).pop(),i=this.getDiscovery();switch(i.console(),t.type){case p.FORWARD_PROPERTY:this.setDiscovery(i.isSubjectOf(new Z["URI"](t.uri)).setDecoration("label",e.label).setDecoration("attributes",JSON.stringify({})).isA(new Z["URI"](n.uri)));break;case p.BACKWARD_PROPERTY:this.setDiscovery(i.isObjectOf(new Z["URI"](t.uri)).setDecoration("label",e.label).setDecoration("attributes",JSON.stringify({})).isA(new Z["URI"](n.uri)));break;case p.IS_A:this.setDiscovery(i.isA(new Z["URI"](n.uri)));break;default:console.error("unkown action :"+JSON.stringify(t));break}return this.getDiscovery().focus()}},{key:"setPageSize",value:function(e){var t=this.getConfiguration();t.pageSize=e,this.setConfiguration(t)}},{key:"focusIsSelected",value:function(){return this.getFocus()!=this.getDiscovery().root().focus()}},{key:"isFocusStart",value:function(){return"start"==this.getFocus()}},{key:"getFocus",value:function(){return this.getDiscovery().focus()}},{key:"setFocusRoot",value:function(){var e=this.getDiscovery().root();this.setDiscovery(e)}},{key:"setFocus",value:function(e){var t=this.getDiscovery().focus(e);this.setDiscovery(t)}},{key:"checkVariablePresent",value:function(e,t,r){for(var n=0;n<r.length;n++){var i=r[n];if(!e.results.bindings[t][i])return console.warn(" probleme with entry : "+JSON.stringify(e.results.bindings[t])),!1}return!0}},{key:"removableNode",value:function(){var e=this;if(!this.focusIsSelected()||this.isFocusStart())return!1;var t=this.getGraph(),r=t.nodes.filter((function(t){return t.focus==e.getDiscovery().focus()})).pop(),n=function(e){return e.source==r.id&&Number(e.target)<Number(r.id)||e.target==r.id&&Number(e.source)<Number(r.id)};return t.links.filter((function(e){return e.state_n==b.CONCRETE})).filter((function(e){return e.source==r.id||e.target==r.id})).every(n)}},{key:"remove_node_graph",value:function(e,t){if(!t)return e;var r={nodes:[],links:[]},n=e.links.filter((function(e){return e.source==t||e.target==t})).filter((function(e){return"1"!=e.source&&"1"!=e.target})).map((function(e){return e.source==t?e.target:e.source}));r.links=e.links.filter((function(e){return e.source!=t&&e.target!=t})),r.nodes=e.nodes.filter((function(e){return e.id!=t}));var i=r.links.flatMap((function(e){return[e.source,e.target]}));return r.nodes=r.nodes.filter((function(e){return!(n.includes(e.id)&&!i.includes(e.id))})),r}},{key:"removeNode",value:function(e){if(this.focusIsSelected()){var t=this.getDiscovery().focus(),r=this.getGraph().nodes.filter((function(e){return e.focus==t})).map((function(e){return e.id})).pop(),n=this.remove_node_graph(this.getGraph(),r);this.setDiscovery(this.getDiscovery().remove(this.getDiscovery().focus()).root()),this.setGraph(n),this.push(),this.vue.$emit("updateRequestManager",this.serialized())}else console.warn("None node is selected !")}},{key:"updateAttribute",value:function(e){if(this.getDiscovery().getDecoration("attributes")){var t=JSON.parse(this.getDiscovery().getDecoration("attributes"));t[e.uri]=e,e.visible&&"uri"!=e.uri?(this.getDiscovery().remove(e.id),this.setDiscovery(this.getDiscovery().datatype(e.uri,e.id))):this.getDiscovery().remove(e.id);var r=this.getDiscovery().focus();if(e.filterValue.length>0){var n=this.getDiscovery();switch("uri"!=e.range&&(n=n.remove(e.id+"_node"),n=n.focus(r),n=n.isSubjectOf(e.uri,e.id+"_node")),e.operator){case h.CONTAINS:this.setDiscovery(n.filter.contains(e.filterValue));break;case h.STREQUAL:this.setDiscovery(n.filter.equal(e.filterValue));break;case h.STRSTARTS:this.setDiscovery(n.filter.strStarts(e.filterValue));break;case h.STRENDS:this.setDiscovery(n.filter.strEnds(e.filterValue));break;case h.EQUAL:this.setDiscovery(n.filter.equal(e.filterValue));break;case h.NOTEQUAL:this.setDiscovery(n.filter.notEqual(e.filterValue));break;case h.INF:this.setDiscovery(n.filter.inf(e.filterValue));break;case h.INFEQUAL:this.setDiscovery(n.filter.infEqual(e.filterValue));break;case h.SUP:this.setDiscovery(n.filter.sup(e.filterValue));break;case h.SUPEQUAL:this.setDiscovery(n.filter.supEqual(e.filterValue));break;default:alert("AttributeTypeSearch does not exist :"+e.operator)}}else"uri"!=e.range&&this.setDiscovery(this.getDiscovery().remove(e.id+"_node").focus(r));this.setDiscovery(this.getDiscovery().focus(r).setDecoration("attributes",JSON.stringify(t))),this.push(),this.vue.$emit("updateRequestManager",this.serialized())}else alert("Bad definition of decorations : "+this.getDiscovery().getDecoration("attributes"))}},{key:"attributeList",value:function(e){var t=this;return new Promise((function(r,n){t.strategy&&t.strategy.attributeList(t.getDiscovery(),e).select("property","labelProperty").distinct().commit().raw().then((function(i){for(var a=[],o=new Map,s=0;s<i.results.bindings.length;s++)if(t.checkVariablePresent(i,s,["property"])){var c=i.results.bindings[s]["property"].value,u=k.splitUrl(c);try{var l=i.results.datatypes["labelProperty"][c];l&&(u=l[0].value)}catch(v){n(v)}o.set(c,u)}for(var d=JSON.parse(t.getDiscovery().getDecoration("attributes")),h=0,f=Object.keys(d);h<f.length;h++){var p=f[h];a.push(d[p])}if(Object.keys(d).includes("uri")||a.unshift(new E("uri",0,"uri","uri","URI")),t.strategy&&o.size>0){var b,g=[],y=Object(Y["a"])(o.keys());try{for(y.s();!(b=y.n()).done;){var m=b.value;g.push(m)}}catch(O){y.e(O)}finally{y.f()}t.strategy.getDatatypes(t.getConfiguration().jsonConfigurationSWDiscoveryString(),g).then((function(t){var n=0;g.map((function(r){if(!Object.keys(d).includes(r)){var i=o.get(r),s=t.get(r);i||(i=r.split(/\/#/).pop()),i||(i=""),s||(s="");var c=e+"_dt_"+n++;a.push(new E(c,n,r,s,i))}})),r(a)})).catch((function(e){n(e)}))}else r(a)})).catch((function(e){n(e)}))}))}},{key:"forwardEntities",value:function(e,t){return this.propertyEntities(e,f.FORWARD_ENTITY,t)}},{key:"backwardEntities",value:function(e,t){return this.propertyEntities(e,f.BACKWARD_ENTITY,t)}},{key:"propertyEntities",value:function(e,t,r){var n=this;return new Promise((function(i,a){if(n.strategy){var o,s=n.getDiscovery();switch(t){case f.FORWARD_ENTITY:s=n.strategy.forwardEntities(n.getDiscovery(),n.getConfiguration().jsonConfigurationSWDiscoveryString(),r),o=p.FORWARD_PROPERTY;break;case f.BACKWARD_ENTITY:s=n.strategy.backwardEntities(n.getDiscovery(),n.getConfiguration().jsonConfigurationSWDiscoveryString(),r),o=p.BACKWARD_PROPERTY;break;default:return void a("unkown action :"+t)}try{var c=s.select("property","entity","labelEntity","labelProperty").limit(20).distinct().commit().progression((function(t){e.$emit("requestManagerBusyPercent",JSON.stringify(t))})).requestEvent((function(t){e.$emit("requestManagerBusyEvent",JSON.stringify(t))}));c.raw().then((function(e){for(var a=new Map,s=0;s<e.results.bindings.length;s++)if(n.checkVariablePresent(e,s,["entity","property"])){var c=e.results.bindings[s]["entity"].value,u=e.results.bindings[s]["property"].value,l="",d="",h=void 0;if(a.has(c))h=a.get(c);else{try{var f=e.results.datatypes["labelEntity"][c];f&&(l=f[0].value)}catch(g){console.warn(g)}h=new C(c,l,t),a.set(c,h)}if(!a.has(c+u)){try{var b=e.results.datatypes["labelProperty"][u];b&&(d=b[0].value)}catch(g){console.warn(g)}o==p.FORWARD_PROPERTY?a.set(c+u,new R(u,d,o,r.id,h.id)):a.set(c+u,new R(u,d,o,h.id,r.id))}}i(a)})).catch((function(e){a(e)}))}catch(u){a(u)}}else a("strategy undefined.")}))}},{key:"getColumnsResults",value:function(){var e=this.getDiscovery(),t=e.browse((function(e,t){var r=[];if(e.decorations&&e.decorations.attributes)for(var n=JSON.parse(e.decorations.attributes),i=0,a=Object.entries(n);i<a.length;i++){var o=Object(H["a"])(a[i],2),s=(o[0],o[1]);s.visible&&("uri"!=s.uri?r.push({node_label:e.decorations.label,node_id:e.idRef,label:s.label,field:s.id,width:"3%",sortable:!0,isKey:!1}):r.push({node_label:e.decorations.label,node_id:e.idRef,label:e.decorations.label,field:e.idRef,width:"3%",sortable:!0,isKey:!1}))}return r})).filter((function(e){return e.length>0}));return t.flat()}},{key:"getCountAndLaziesPages",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,r=this.getColumnsResults().flatMap((function(e){return[e.node_id,e.field]})),n=Object(X["a"])(new Set(r));return this.setPageSize(t),new Promise((function(t,r){var i;(i=e.getDiscovery()).selectByPage.apply(i,Object(X["a"])(n)).then((function(e){t(e)})).catch((function(e){r(e)}))}))}}],[{key:"defaultGraph",value:function(e){return{nodes:[C.something(b.CONCRETE,e)],links:[]}}},{key:"getDefault",value:function(t,r){return new e(Object(Z["SWDiscovery"])(Z["SWDiscoveryConfiguration"].setConfigString(t.jsonConfigurationSWDiscoveryString())).root().setDecoration("configuration",JSON.stringify(t)).setDecoration("graph",JSON.stringify(this.defaultGraph("start"))).something("start").setDecoration("label","Something").setDecoration("attributes",JSON.stringify({})).root().getSerializedString(),r)}},{key:"forwardIsActive",value:function(){return ae<ie.length-1}},{key:"forward",value:function(){if(e.forwardIsActive())return ae+=1,ie[ae];throw Error("Can not pop a discovery session.")}},{key:"backwardIsActive",value:function(){return console.log(ae),ae>0}},{key:"backward",value:function(){if(e.backwardIsActive())return ae-=1,ie[ae];throw Error("Can not pop a discovery session.")}}]),e}();oe.idCounter=0;var se=function(){function e(){Object(y["a"])(this,e)}return Object(j["a"])(e,null,[{key:"releaseSelectedObject",value:function(e){return e.nodes=e.nodes.map((function(e){return e.state_n==b.SELECTED&&(e.state_n=b.CONCRETE),e})),e.links=e.links.map((function(e){return e.state_n==b.SELECTED&&(e.state_n=b.CONCRETE),e})),e}},{key:"clickNodeForward",value:function(e,t,r){return e.$emit("requestManagerBusy",JSON.stringify(!0)),new Promise((function(n,i){t.forwardEntities(e,r).then((function(t){var r=[],i=[];t.forEach((function(e,t){var n=Object.assign({},e);e instanceof C?r.push(n):e instanceof R&&i.push(n)})),e.$emit("requestManagerBusy",JSON.stringify(!1)),n([r,i])})).catch((function(t){e.$emit("requestManagerBusy",JSON.stringify(!1)),i(t)}))}))}},{key:"clickNodeBackward",value:function(e,t,r){return e.$emit("requestManagerBusy",JSON.stringify(!0)),new Promise((function(n,i){t.backwardEntities(e,r).then((function(t){var r=[],i=[];t.forEach((function(e,t){var n=Object.assign({},e);e instanceof C?r.push(n):e instanceof R&&i.push(n)})),e.$emit("requestManagerBusy",JSON.stringify(!1)),n([r,i])})).catch((function(t){e.$emit("requestManagerBusy",JSON.stringify(!1)),i(t)}))}))}},{key:"setShapeNode",value:function(e,t){if(t.state_n==b.SELECTED)return e.getGraph();var r=e.getGraph();return t.state_n==b.CONCRETE?(t.focus&&t.focus.length>0&&(r.nodes=r.nodes.map((function(r){return r.id==t.id&&(r.state_n=b.SELECTED,e.setFocus(r.focus)),r}))),r):(r.links=r.links.map((function(n){if(n.state_n==b.SUGGESTED&&(n.source==t.id||n.target==t.id)){n.state_n=b.CONCRETE;var i=e.setNewNodeWithLink(t,n);r.nodes=r.nodes.map((function(e){return e.id==t.id&&(e.focus=i),e}))}return n})),r.nodes=r.nodes.map((function(e){return e.id==t.id&&(e.state_n=b.SELECTED),e})),r)}},{key:"removeSuggestion",value:function(e){var t=e.getGraph();return t.nodes=t.nodes.filter((function(e){return e.state_n!=b.SUGGESTED})),t.links=t.links.filter((function(e){return e.state_n!=b.SUGGESTED})),t}}]),e}(),ce=function(e){Object(m["a"])(r,e);var t=Object(v["a"])(r);function r(){return Object(y["a"])(this,r),t.apply(this,arguments)}return r}(S["b"]);ce=Object(O["a"])([Object(S["a"])({name:"QueryGraphPanel",emits:["updateRequestManager","requestManagerBusy","requestManagerBusyEvent","requestManagerBusyPercent"],components:{},props:{requestString:{type:String,required:!0},filterProperty:g,width:Number,height:Number},data:function(){return{ctrlKey:!1,canvas:null,ctx:null,color:K["h"](["#6b486b","#a05d56","#d0743c","#ff8c00"]),zoom:5,zoomTime:1e3,trans:K["j"],colorGrey:"#808080",colorDarkGrey:"#404040",colorFirebrick:"#cc0000",lineWidth:2.5,nodeSize:17,textSize:12,blankNodeSize:1,arrowLength:40,forceCollide:40,strengthForce:1,strengthForceManBody:-2e3,alphaTarget:0,canvasClass:"",nodesSimulation:[],linksSimulation:[],request:null,selectedNodeCanvas:null}},mounted:function(){this.requestString?(this.request=new oe(this.requestString,this),this.setUpSimulation(),this.refreshSimulation()):alert("requestString is not set.")},beforeDestroy:function(){},watch:{requestString:function(){this.request=new oe(this.requestString,this),this.refreshSimulation(),this.simulation.restart()},filterProperty:function(){this.refreshSimulation(),this.simulation.restart()}},methods:{selectedNode:function(){return this.request.getGraph().nodes.filter((function(e){return e.state_n==b.SELECTED})).pop()},setUpSimulation:function(){this.canvas=K["i"]("#canvas-askomics-graph"),this.ctx=this.canvas.node().getContext("2d"),this.simulation=K["e"]().force("x",K["f"](this.width/2).strength(this.strengthForce)).force("y",K["g"](this.height/2).strength(this.strengthForce)).force("collide",K["b"](this.nodeSize+this.forceCollide)).force("charge",K["d"]().strength(this.strengthForceManBody)),this.simulation.on("tick",this.updateSimulation),this.canvas.on("click",this.canvasClick).call(K["a"]().container(this.canvas.node()).subject(this.dragsubject).on("start",this.dragstarted).on("drag",this.dragged).on("end",this.dragended))},refreshSimulation:function(){this.setObjectsSimulation(),this.updateSimulation()},setObjectsSimulation:function(){var e=this;this.nodesSimulation=this.request.getGraph().nodes.map((function(t){var r=function(e){return e.id===t.id},n=e.nodesSimulation.findIndex(r);return n>=0&&(t.x=e.nodesSimulation[n].x,t.y=e.nodesSimulation[n].y),t})),this.linksSimulation=this.request.getGraph().links.map((function(t){var r=function(e){return e.id===t.id},n=e.linksSimulation.findIndex(r);return n>=0&&(t.x=e.linksSimulation[n].x,t.y=e.linksSimulation[n].y,t.vx=e.linksSimulation[n].x,t.vy=e.linksSimulation[n].y),t}))},updateSimulation:function(){this.ctx.clearRect(0,0,this.width,this.height),this.ctx.fillStyle="Gainsboro",this.ctx.fillRect(0,0,this.width,this.height),this.ctx.beginPath(),this.ctx.globalAlpha=1,this.ctx.strokeStyle="#aaa",this.linksSimulation.forEach(this.drawLink),this.ctx.stroke(),this.ctx.globalAlpha=1,this.nodesSimulation.forEach(this.drawNode),this.simulation.nodes(this.nodesSimulation),this.simulation.force("link",K["c"]().id((function(e){return e.id}))).force("link").links(this.linksSimulation)},zoomed:function(e){this.ctx.translate(e.transform.x,e.transform.y),this.ctx.scale(e.transform.k,e.transform.k)},dragsubject:function(e){return this.simulation.find(e.x,e.y)},canvasClick:function(e){var t=this.canvas.node().getBoundingClientRect();this.selectedNodeCanvas=this.simulation.find(e.x-t.left,e.y-t.top,this.nodeSize),this.selectedNodeCanvas&&this.selectedNodeCanvas.state_n==b.SELECTED||(e.ctrlKey||this.request.setGraph(se.releaseSelectedObject(this.request.getGraph())),this.updateGraph(this.selectedNodeCanvas),this.$emit("updateRequestManager",this.request.serialized()))},updateGraph:function(e){if(e){var t=e.state_n==b.SUGGESTED;console.debug(" ---  SELECTED NODE / updateGraph/UserIncrementManager.setShapeNode --- "),this.request.setGraph(se.setShapeNode(this.request,e)),console.debug(" ---  SELECTED NODE / updateGraph/UserIncrementManager.removeSuggestion --- "),this.request.setGraph(se.removeSuggestion(this.request)),t&&this.request.push(),this.display_suggestions()}else console.debug(" ---  UNSELECTED NODE / updateGraph/UserIncrementManager.removeSuggestion --- "),this.request.setGraph(se.removeSuggestion(this.request)),this.request.setFocusRoot(),this.refreshSimulation()},display_suggestions:function(){if(this.selectedNode()){var e=this;e.canvasClass="query-graph-panel-disabled";var t=[];switch(this.filterProperty){case g.ALL:t=[se.clickNodeForward(this,this.request,this.selectedNode()),se.clickNodeBackward(this,this.request,this.selectedNode())];break;case g.TO:t=[se.clickNodeForward(this,this.request,this.selectedNode())];break;case g.FROM:t=[se.clickNodeBackward(this,this.request,this.selectedNode())];break;case g.IS_A:t=[];break}Promise.all(t).then((function(t){var r,n=e.request.getGraph().nodes,i=e.request.getGraph().links,a=Object(Y["a"])(t);try{for(a.s();!(r=a.n()).done;){var o=r.value;n=n.concat(o[0]),i=i.concat(o[1])}}catch(s){a.e(s)}finally{a.f()}e.request.setGraph({nodes:n,links:i}),e.canvasClass=""})).catch((function(e){alert(e)})).finally((function(){e.canvasClass="",e.refreshSimulation()}))}},dragstarted:function(e){e.active||this.simulation.alphaTarget(.3).restart(),e.subject.fx=e.subject.x,e.subject.fy=e.subject.y},dragged:function(e){e.subject.fx=e.x,e.subject.fy=e.y},dragended:function(e){e.active||this.simulation.alphaTarget(0),e.subject.fx=null,e.subject.fy=null},IntersectionCoordinate:function(e,t,r,n,i){var a,o,s=Math.atan((n-t)/(e-r));return e<r?(a=e+i*Math.cos(s),o=t-i*Math.sin(s)):(a=e-i*Math.cos(s),o=t+i*Math.sin(s)),{x:a,y:o}},middleCoordinate:function(e,t,r,n){var i,a,o=Math.atan((n-t)/(e-r));return e<r?(i=e+4*this.nodeSize*Math.cos(o),a=t-4*this.nodeSize*Math.sin(o)):(i=e-4*this.nodeSize*Math.cos(o),a=t+4*this.nodeSize*Math.sin(o)),{x:i,y:a}},triangleCoordinate:function(e,t,r,n,i){var a=Math.atan2(t-n,e-r),o=e-i*Math.cos(a-Math.PI/14),s=t-i*Math.sin(a-Math.PI/14),c=e-i*Math.cos(a+Math.PI/14),u=t-i*Math.sin(a+Math.PI/14);return{xa:o,ya:s,xb:c,yb:u}},drawNode:function(e){var t=this.colorGrey,r=this.colorDarkGrey;this.ctx.fillStyle=e.uri?k.stringToHexColor(e.uri):"#faaafff",this.ctx.lineWidth=this.lineWidth,this.ctx.strokeStyle=e.state_n==b.SELECTED?this.colorFirebrick:t,this.ctx.globalAlpha=e.state_n==b.SUGGESTED?.5:1,e.state_n==b.SUGGESTED?this.ctx.setLineDash([this.lineWidth,this.lineWidth]):this.ctx.setLineDash([]),this.ctx.beginPath(),this.ctx.arc(e.x,e.y,this.nodeSize,0,2*Math.PI,!1),this.ctx.stroke(),this.ctx.fill(),this.ctx.closePath(),this.ctx.beginPath(),this.ctx.fillStyle=r,this.ctx.font=this.nodeSize+"px Sans-Serif",this.ctx.textAlign="middle",this.ctx.textBaseline="middle";var n=e.label;this.ctx.fillText(n,e.x+this.nodeSize,e.y+this.nodeSize),this.ctx.closePath()},drawLink:function(e){e.state_n==b.SUGGESTED?this.ctx.setLineDash([this.lineWidth,this.lineWidth]):this.ctx.setLineDash([]);var t=this.colorGrey,r=this.colorDarkGrey;this.ctx.strokeStyle=e.state_n==b.SELECTED?this.colorFirebrick:t,this.ctx.fillStyle=e.state_n==b.SELECTED?this.colorFirebrick:this.colorGrey,this.ctx.globalAlpha=e.state_n==b.SUGGESTED?.3:1,this.ctx.lineWidth=this.lineWidth;var n=e.target,i=e.source;this.ctx.beginPath();var a=this.IntersectionCoordinate(i.x,i.y,n.x,n.y,this.nodeSize);if(this.ctx.moveTo(a.x,a.y),a=this.IntersectionCoordinate(n.x,n.y,i.x,i.y,this.nodeSize),this.ctx.lineTo(a.x,a.y),this.ctx.stroke(),this.ctx.closePath(),e.type==p.FORWARD_PROPERTY||e.type==p.BACKWARD_PROPERTY){this.ctx.beginPath();var o=this.triangleCoordinate(n.x,n.y,i.x,i.y,this.arrowLength);this.ctx.moveTo(a.x,a.y),this.ctx.lineTo(o.xa,o.ya),this.ctx.lineTo(o.xb,o.yb),this.ctx.fill(),this.ctx.closePath()}this.ctx.beginPath(),this.ctx.fillStyle=r,this.ctx.font=this.textSize+"px Sans-Serif",this.ctx.textAlign="middle",this.ctx.textBaseline="middle";var s=this.middleCoordinate(i.x,i.y,n.x,n.y);this.ctx.fillText(e.label,s.x,s.y),this.ctx.closePath()}}})],ce);var ue=ce;r("2850");ue.render=J;var le=ue,de={id:"attributes-panel",class:"attributesList"},he={class:"d-flex justify-content-end"},fe={class:"btn-group btn-group-sm",role:"group","aria-label":"Basic example"},pe={key:0,id:"v-model-select-property",class:"form-control"},be=["value"],ge={key:1,type:"button",class:"form-control btn btn-secondary",disabled:""};function ye(e,t,r,i,a,o){var s=Object(n["resolveComponent"])("attributeBox");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",de,[Object(n["createElementVNode"])("div",he,[Object(n["createElementVNode"])("div",fe,[Object(n["createElementVNode"])("div",null,[e.displayCommonAttributeButtons?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",pe,[Object(n["withDirectives"])(Object(n["createElementVNode"])("select",{"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.selected_filterProperty=t})},[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.propertyFilterList,(function(e){return Object(n["openBlock"])(),Object(n["createElementBlock"])("option",{key:e.id,value:e.id},Object(n["toDisplayString"])(e.label),9,be)})),128))],512),[[n["vModelSelect"],e.selected_filterProperty]])])):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",null,[e.displayRemoveButton?(Object(n["openBlock"])(),Object(n["createElementBlock"])("button",{key:0,type:"button",class:"form-control btn btn-secondary",onClick:t[1]||(t[1]=function(){return e.removeNode&&e.removeNode.apply(e,arguments)})},"Remove")):(Object(n["openBlock"])(),Object(n["createElementBlock"])("button",ge,"Remove"))])])]),(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.attributeList,(function(t){return Object(n["openBlock"])(),Object(n["createBlock"])(s,{key:t.id,attribute:t,onUpdateAttribute:e.updateAttribute},null,8,["attribute","onUpdateAttribute"])})),128))])}r("4e82");var me=["id"],ve={class:"attr-label"},Oe={className:"attr-icons"},Se={key:0},je={key:1},ke={key:2},Ee={key:3};function we(e,t,r,i,a,o){var s=Object(n["resolveComponent"])("font-awesome-icon"),c=Object(n["resolveComponent"])("URIBox"),u=Object(n["resolveComponent"])("XsdString"),l=Object(n["resolveComponent"])("XsdNumeric");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{id:e.attribute.id,class:"attribute-box"},[Object(n["createElementVNode"])("label",ve,Object(n["toDisplayString"])(e.attribute.label),1),Object(n["createElementVNode"])("div",Oe,[Object(n["createVNode"])(s,{onClick:e.erase,icon:["fas","eraser"]},null,8,["onClick"]),e.attribute.visible?(Object(n["openBlock"])(),Object(n["createBlock"])(s,{key:0,onClick:e.closeEye,icon:["fas","eye"]},null,8,["onClick"])):(Object(n["openBlock"])(),Object(n["createBlock"])(s,{key:1,onClick:e.openEye,icon:["fas","eye-slash"]},null,8,["onClick"]))]),"uri"==e.attribute.range?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Se,[Object(n["createVNode"])(c,{attribute:e.attribute,onUpdateAttribute:t[0]||(t[0]=function(t){return e.$emit("updateAttribute",t)})},null,8,["attribute"])])):"xsd:string"==e.attribute.range?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",je,[Object(n["createVNode"])(u,{attribute:e.attribute,"onUpdate:attribute":t[1]||(t[1]=function(t){return e.attribute=t}),onUpdateAttribute:t[2]||(t[2]=function(t){return e.$emit("updateAttribute",t)})},null,8,["attribute"])])):["xsd:numeric","xsd:double","xsd:float","xsd:integer"].includes(e.attribute.range)?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",ke,[Object(n["createVNode"])(l,{attribute:e.attribute,onUpdateAttribute:t[3]||(t[3]=function(t){return e.$emit("updateAttribute",t)})},null,8,["attribute"])])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Ee,Object(n["toDisplayString"])(e.attribute.range)+" is not supported ! ",1))],8,me)}var Ne={id:"askomics-uri-box"},De=["value"],Ce=["value"];function Re(e,t,r,i,a,o){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Ne,[Object(n["createElementVNode"])("table",null,[Object(n["createElementVNode"])("tr",null,[Object(n["createElementVNode"])("td",null,[Object(n["withDirectives"])(Object(n["createElementVNode"])("select",{onBlur:t[0]||(t[0]=function(){return e.updateFilterValue&&e.updateFilterValue.apply(e,arguments)}),"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.attribute.operator=t})},[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.optionsTypeCompare,(function(e){return Object(n["openBlock"])(),Object(n["createElementBlock"])("option",{key:e.value,value:e.value},Object(n["toDisplayString"])(e.text),9,De)})),128))],544),[[n["vModelSelect"],e.attribute.operator]])]),Object(n["createElementVNode"])("td",null,[Object(n["withDirectives"])(Object(n["createElementVNode"])("select",{onBlur:t[2]||(t[2]=function(){return e.updateFilterValue&&e.updateFilterValue.apply(e,arguments)}),"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.attribute.negative=t})},[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.optionsTypeSearch,(function(e){return Object(n["openBlock"])(),Object(n["createElementBlock"])("option",{key:e.value,value:e.value},Object(n["toDisplayString"])(e.text),9,Ce)})),128))],544),[[n["vModelSelect"],e.attribute.negative]])]),Object(n["createElementVNode"])("td",null,[Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{onBlur:t[4]||(t[4]=function(){return e.updateFilterValue&&e.updateFilterValue.apply(e,arguments)}),"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.attribute.filterValue=t}),placeholder:"edit me"},null,544),[[n["vModelText"],e.attribute.filterValue]])])])])])}var Be=function(e){Object(m["a"])(r,e);var t=Object(v["a"])(r);function r(){return Object(y["a"])(this,r),t.apply(this,arguments)}return r}(S["b"]);Be=Object(O["a"])([Object(S["a"])({name:"URIBox",emits:["updateAttribute"],props:{attribute:Object},data:function(){return{optionsTypeSearch:[{text:"Contains",value:h.CONTAINS},{text:"Exact",value:h.EQUAL},{text:"Starts",value:h.STRSTARTS},{text:"Ends",value:h.STRENDS}],optionsTypeCompare:[{text:"",value:!1},{text:"NOT",value:!0}]}},methods:{updateFilterValue:function(){this.attribute.filterValue&&this.attribute.filterValue.length>0&&this.$emit("updateAttribute",JSON.stringify(this.attribute))}}})],Be);var xe=Be;xe.render=Re;var qe=xe,Te={id:"askomics-text-box"},Ve=["value"],Ae=["value"];function Pe(e,t,r,i,a,o){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Te,[Object(n["createElementVNode"])("table",null,[Object(n["createElementVNode"])("tr",null,[Object(n["createElementVNode"])("td",null,[Object(n["withDirectives"])(Object(n["createElementVNode"])("select",{onBlur:t[0]||(t[0]=function(){return e.updateFilterValue&&e.updateFilterValue.apply(e,arguments)}),"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.attribute.negative=t})},[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.optionsTypeCompare,(function(e){return Object(n["openBlock"])(),Object(n["createElementBlock"])("option",{key:e.value,value:e.value},Object(n["toDisplayString"])(e.text),9,Ve)})),128))],544),[[n["vModelSelect"],e.attribute.negative]])]),Object(n["createElementVNode"])("td",null,[Object(n["withDirectives"])(Object(n["createElementVNode"])("select",{onBlur:t[2]||(t[2]=function(){return e.updateFilterValue&&e.updateFilterValue.apply(e,arguments)}),"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.attribute.operator=t})},[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.optionsTypeSearch,(function(e){return Object(n["openBlock"])(),Object(n["createElementBlock"])("option",{key:e.value,value:e.value},Object(n["toDisplayString"])(e.text),9,Ae)})),128))],544),[[n["vModelSelect"],e.attribute.operator]])]),Object(n["createElementVNode"])("td",null,[Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{onBlur:t[4]||(t[4]=function(){return e.updateFilterValue&&e.updateFilterValue.apply(e,arguments)}),"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.attribute.filterValue=t}),placeholder:"edit me"},null,544),[[n["vModelText"],e.attribute.filterValue]])])])])])}var Me=function(e){Object(m["a"])(r,e);var t=Object(v["a"])(r);function r(){return Object(y["a"])(this,r),t.apply(this,arguments)}return r}(S["b"]);Me=Object(O["a"])([Object(S["a"])({name:"XsdString",emits:["updateAttribute"],props:{attribute:{type:Object,required:!0}},data:function(){return{optionsTypeSearch:[{text:"Contains",value:h.CONTAINS},{text:"Exact",value:h.EQUAL},{text:"Starts",value:h.STRSTARTS},{text:"Ends",value:h.STRENDS}],optionsTypeCompare:[{text:"",value:!1},{text:"NOT",value:!0}]}},methods:{updateFilterValue:function(){this.attribute.filterValue&&this.attribute.filterValue.length>0&&this.$emit("updateAttribute",JSON.stringify(this.attribute))}}})],Me);var Le=Me;Le.render=Pe;var Ue=Le,_e={id:"askomics-text-box"},Ie=["value"];function Fe(e,t,r,i,a,o){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",_e,[Object(n["createElementVNode"])("table",null,[Object(n["createElementVNode"])("tr",null,[Object(n["createElementVNode"])("td",null,[Object(n["withDirectives"])(Object(n["createElementVNode"])("select",{onBlur:t[0]||(t[0]=function(){return e.updateFilterValue&&e.updateFilterValue.apply(e,arguments)}),"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.attribute.operator=t})},[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.optionsOprator,(function(e){return Object(n["openBlock"])(),Object(n["createElementBlock"])("option",{key:e.value,value:e.value},Object(n["toDisplayString"])(e.text),9,Ie)})),128))],544),[[n["vModelSelect"],e.attribute.operator]])]),Object(n["createElementVNode"])("td",null,[Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{onBlur:t[2]||(t[2]=function(){return e.updateFilterValue&&e.updateFilterValue.apply(e,arguments)}),"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.attribute.filterValue=t}),placeholder:"edit me"},null,544),[[n["vModelText"],e.attribute.filterValue]])])])])])}var Ge=function(e){Object(m["a"])(r,e);var t=Object(v["a"])(r);function r(){return Object(y["a"])(this,r),t.apply(this,arguments)}return r}(S["b"]);Ge=Object(O["a"])([Object(S["a"])({name:"XsdNumeric",emits:["updateAttribute"],props:{attribute:Object},data:function(){return{optionsOprator:[{text:"=",value:h.EQUAL},{text:"<",value:h.INF},{text:"<=",value:h.INFEQUAL},{text:">",value:h.SUP},{text:">=",value:h.SUPEQUAL},{text:"!=",value:h.NOTEQUAL}],filterValue:""}},methods:{updateFilterValue:function(){this.attribute.filterValue&&this.attribute.filterValue.length>0&&this.$emit("updateAttribute",JSON.stringify(this.attribute))}}})],Ge);var We=Ge;We.render=Fe;var ze=We;[W["i"],W["p"],W["b"],W["l"],W["f"],W["g"],W["e"]].map((function(e){return G["c"].add(e)}));var Qe=function(e){Object(m["a"])(r,e);var t=Object(v["a"])(r);function r(){return Object(y["a"])(this,r),t.apply(this,arguments)}return r}(S["b"]);Qe=Object(O["a"])([Object(S["a"])({components:{library:G["c"],FontAwesomeIcon:z["a"],XsdString:Ue,XsdNumeric:ze,URIBox:qe},emits:["updateAttribute"],props:{attribute:{type:Object,required:!0}},methods:{toggleLinkAttribute:function(){console.log("click 1 !")},erase:function(){this.$emit("updateAttribute",JSON.stringify(E.from(this.attribute).clean()))},openEye:function(){this.attribute.visible=!0,this.$emit("updateAttribute",JSON.stringify(this.attribute))},closeEye:function(){this.attribute.visible=!1,this.$emit("updateAttribute",JSON.stringify(this.attribute))},openLink:function(){this.attribute.linked=!0,this.$emit("updateAttribute",JSON.stringify(this.attribute))},closeLink:function(){this.attribute.linked=!1,this.$emit("updateAttribute",JSON.stringify(this.attribute))},toggleOptional:function(){console.log("click 3 !")}},data:function(){return{}}})],Qe);var Je=Qe;r("9ac1");Je.render=we;var $e=Je,Ye=function(){function e(){Object(y["a"])(this,e)}return Object(j["a"])(e,null,[{key:"buildAttributesBox",value:function(e){return new Promise((function(t,r){e.getDiscovery().browse((function(n,i){if(n.idRef==e.getFocus()){var a=n.decorations.attributes?JSON.parse(n.decorations.attributes):{};e.attributeList(e.getFocus()).then((function(e){var r=e.map((function(e){return a[e.uri]?E.from(a[e.uri]):e})).map((function(e){return e.getObject()}));t(r)})).catch((function(e){r(e)}))}}))}))}}]),e}(),Ke=function(e){Object(m["a"])(r,e);var t=Object(v["a"])(r);function r(){return Object(y["a"])(this,r),t.apply(this,arguments)}return r}(S["b"]);Ke=Object(O["a"])([Object(S["a"])({name:"AttributesPanel",emits:["updateRequestManager","updateFilterProperty"],components:{AttributeBox:$e},props:{requestString:{type:String,required:!0},width:Number,height:Number},created:function(){},mounted:function(){this.updateRequestString(this.requestString);var e=document.querySelector(".attributesList");e&&(e.style.height=this.height+"px",e.style.width=this.width+"px")},watch:{requestString:function(e){this.updateRequestString(e)},selected_filterProperty:function(e){this.$emit("updateFilterProperty",JSON.stringify(e))}},data:function(){return{propertyFilterList:[{id:g.TO,label:"TO"},{id:g.FROM,label:"FROM"},{id:g.IS_A,label:"IS_A"},{id:g.ALL,label:"ALL"}],request:null,selected_filterProperty:g.TO,attributeList:[],componentKey:0}},computed:{displayCommonAttributeButtons:function(){return!!this.request&&this.request.focusIsSelected()},displayRemoveButton:function(){return!!this.request&&this.request.removableNode()}},methods:{updateRequestString:function(e){this.request=new oe(e,this),this.updateAttributeList()},updateAttributeList:function(){var e=this;this.request.focusIsSelected()?Ye.buildAttributesBox(this.request).then((function(t){e.attributeList=t,e.attributeList.sort((function(e,t){return Number(e.order)-Number(t.order)}))})):this.attributeList=[]},removeNode:function(){this.request.removeNode(this),this.updateAttributeList()},updateAttribute:function(e){this.request.updateAttribute(JSON.parse(e)),this.updateAttributeList()}}})],Ke);var Xe=Ke;r("67ff");Xe.render=ye;var He=Xe;[W["n"]].map((function(e){return G["c"].add(e)}));var Ze=function(e){Object(m["a"])(r,e);var t=Object(v["a"])(r);function r(){return Object(y["a"])(this,r),t.apply(this,arguments)}return r}(S["b"]);Ze=Object(O["a"])([Object(S["a"])({name:"QueryBuilderPanel",components:{library:G["c"],FontAwesomeIcon:z["a"],QueryGraphPanel:le,AttributesPanel:He},emits:["updateRequestManager"],props:{requestString:String},data:function(){return{currentQuery:this.requestString,requestBusy:!1,requestBusyPercent:"0",requestBusyEvent:"",filterProperty:g.TO}},watch:{requestBusy:"prepareRequestBusy",requestBusyPercent:"prepareRequestBusy",requestString:function(){this.currentQuery=this.requestString}},created:function(){},mounted:function(){},computed:{},methods:{prepareRequestBusy:function(){this.requestBusy&&"100"!=this.requestBusyPercent||(this.requestBusyPercent="0",this.requestBusyEvent="")},updateQuery:function(e){this.currentQuery=e,this.$emit("updateRequestManager",this.currentQuery)},attributeBoxEvent:function(e){console.log("attributeBoxEvent:",e)}}})],Ze);var et=Ze;r("8ee3");et.render=F;var tt=et,rt=function(e){Object(m["a"])(r,e);var t=Object(v["a"])(r);function r(){return Object(y["a"])(this,r),t.apply(this,arguments)}return r}(S["b"]);rt=Object(O["a"])([Object(S["a"])({name:"GraphBuilder",props:{rm:String},components:{QueryBuilderPanel:tt},emits:["updateRequestManager"],computed:{requestString:function(){return r("cea6").decompress(this.$route.params.rm)}},methods:{updateRequestString:function(e){this.$emit("updateRequestManager",e)}}})],rt);var nt=rt;r("1313");nt.render=x;var it=nt,at={id:"console-panel"},ot={class:"container"},st={class:"code"};function ct(e,t,r,i,a,o){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",at,[Object(n["createElementVNode"])("div",ot,[Object(n["createElementVNode"])("pre",st," "+Object(n["toDisplayString"])(e.console)+" ",1)])])}var ut=function(e){Object(m["a"])(r,e);var t=Object(v["a"])(r);function r(){return Object(y["a"])(this,r),t.apply(this,arguments)}return r}(S["b"]);ut=Object(O["a"])([Object(S["a"])({name:"Console",components:{},emits:["updateDiscovery"],data:function(){return{}},computed:{console:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){var e=console.log,t="";console.log=function(e){for(var r=e,n=0;n<=47;n++)r=r.replace("["+n+"m","");t+=r+"\n"};var n=r("cea6").decompress(this.$route.params.rm);return new oe(n,this).getDiscovery().console(),console.log=e,t}))}})],ut);var lt=ut;r("cf6b");lt.render=ct;var dt=lt;function ht(e,t,r,i,a,o){var s=Object(n["resolveComponent"])("ResultsPanel");return Object(n["openBlock"])(),Object(n["createBlock"])(s,{rm:e.rm},null,8,["rm"])}var ft={id:"results-panel"};function pt(e,t,r,i,a,o){var s=Object(n["resolveComponent"])("vue-table-lite");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",ft,[Object(n["createVNode"])(s,{"is-static-mode":e.isStaticMode,"has-checkbox":e.hasCheckbox,"is-loading":e.isLoading,"is-re-search":e.isReSearch,columns:e.columns,rows:e.rows,total:e.totalRecordCount,sortable:e.isSortable,messages:e.messages,onDoSearch:e.doSearch,onIsFinished:e.tableLoadingFinish,onReturnCheckedRow:e.updateCheckedRows},null,8,["is-static-mode","has-checkbox","is-loading","is-re-search","columns","rows","total","sortable","messages","onDoSearch","onIsFinished","onReturnCheckedRow"])])}r("07ac");var bt=r("4154"),gt=r.n(bt),yt=function(e){Object(m["a"])(r,e);var t=Object(v["a"])(r);function r(){return Object(y["a"])(this,r),t.apply(this,arguments)}return r}(S["b"]);yt=Object(O["a"])([Object(S["a"])({name:"ResultsPanel",components:{VueTableLite:gt.a},props:{rm:{type:String,required:!1},isStaticMode:{type:Boolean,required:!1,default:!0},hasCheckbox:{type:Boolean,required:!1,default:!1},isSortable:{type:Object,required:!1,default:{order:"id",sort:"asc"}}},data:function(){return{laziestPages:[],rows:[],totalRecordCount:2,messages:{pagingInfo:"Showing {0}-{1} of {2}",pageSizeChangeLabel:"Row count:",gotoPageLabel:"Go to page:",noDataAvailable:"No data"},isLoading:!1,isReSearch:!1}},computed:{columns:function(){return new oe(this.rm,this).getColumnsResults()}},mounted:function(){this.resultsPage(0)},methods:{resultsPage:function(e,t){var r=this;0==this.columns.length?this.rows=[]:new oe(this.rm,this).getCountAndLaziesPages(t).then((function(t){r.totalRecordCount=Object.values(t)[0];var n=Object.values(t)[1];r.totalRecordCount>0&&n.length>0&&n[e].commit().raw().then((function(t){r.rows=[];for(var n=new Map,i=function(i){var a={};a["id"]=10*e+i;var o=Object(X["a"])(new Set(r.columns.filter((function(e){return e.node_id})).map((function(e){return e.node_id}))));o.forEach((function(e){n.set(e,t.results.bindings[i][e].value)})),r.columns.forEach((function(e){var r="",i=n.get(e.node_id);e.field===e.node_id?r=i:t.results.datatypes[e.field]&&t.results.datatypes[e.field][i]&&t.results.datatypes[e.field][i].length>0&&(r=t.results.datatypes[e.field][i][0].value),a[e.field]=r})),r.rows.push(a)},a=0;a<t.results.bindings.length;a++)i(a)}))}))},doSearch:function(e,t,r,n){this.isLoading=!0,this.isReSearch=!!e,this.resultsPage(Math.floor(e/10),t);try{r&&(this.sortable.order=r)}catch(i){console.warn(i)}try{n&&(this.sortable.sort=n)}catch(i){console.warn(i)}},tableLoadingFinish:function(){this.isLoading=!1},updateCheckedRows:function(){console.log("updateCheckedRows")}}})],yt);var mt=yt;mt.render=pt;var vt=mt,Ot=function(e){Object(m["a"])(r,e);var t=Object(v["a"])(r);function r(){return Object(y["a"])(this,r),t.apply(this,arguments)}return r}(S["b"]);Ot=Object(O["a"])([Object(S["a"])({name:"Results",components:{ResultsPanel:vt},data:function(){return{}},computed:{rm:function(){return r("cea6").decompress(this.$route.params.rm)}},methods:{}})],Ot);var St=Ot;St.render=ht;var jt=St;function kt(e,t,r,i,a,o){var s=Object(n["resolveComponent"])("ConfigurationPanel");return Object(n["openBlock"])(),Object(n["createBlock"])(s,{configurations_list:e.config_list,requestManagerStringify:e.requestManagerStringify},null,8,["configurations_list","requestManagerStringify"])}var Et={id:"configuration-panel"},wt={class:"container"},Nt=Object(n["createElementVNode"])("hr",null,null,-1),Dt={class:"row"},Ct={class:"input-group mb-3"},Rt={class:"input-group-prepend"},Bt=["value"],xt={id:"browsers"},qt=["value"],Tt={class:"row"},Vt={class:"input-group mb-3"},At=Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("label",{class:"form-control",for:"sel1"},"Strategy:")],-1),Pt={class:"form-check form-check-inline"},Mt=Object(n["createElementVNode"])("label",{class:"form-check-label",for:"strategyRequest"}," AskOmics ",-1),Lt={class:"form-check form-check-inline"},Ut=Object(n["createElementVNode"])("label",{class:"form-check-label",for:"strategyRequest"}," Data-Driven ",-1);function _t(e,t,r,i,a,o){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Et,[Object(n["createElementVNode"])("div",wt,[Nt,Object(n["createElementVNode"])("div",Dt,[Object(n["createElementVNode"])("div",Ct,[Object(n["createElementVNode"])("div",Rt,[Object(n["withDirectives"])(Object(n["createElementVNode"])("select",{"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.selectedimetype=t}),class:"form-control"},[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.optionsMimetype,(function(e){return Object(n["openBlock"])(),Object(n["createElementBlock"])("option",{key:e.text,value:e.value},Object(n["toDisplayString"])(e.text),9,Bt)})),128))],512),[[n["vModelSelect"],e.selectedimetype]])]),Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.selectedEndpoint=t}),class:"form-control",onChange:t[2]||(t[2]=function(){return e.updateConfiguration&&e.updateConfiguration.apply(e,arguments)}),placeholder:"http://",list:"browsers","aria-label":"Endpoint"},null,544),[[n["vModelText"],e.selectedEndpoint]]),Object(n["createElementVNode"])("datalist",xt,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.configurationsList,(function(e){return Object(n["openBlock"])(),Object(n["createElementBlock"])("option",{key:e,value:e.endpoint},null,8,qt)})),128))])])]),Object(n["createElementVNode"])("div",Tt,[Object(n["createElementVNode"])("div",Vt,[At,Object(n["createElementVNode"])("div",Pt,[Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{name:"strategyRequest",value:"askomics",class:"form-check-input",type:"radio","onUpdate:modelValue":t[3]||(t[3]=function(t){return e.selectedStrategy=t}),onChange:t[4]||(t[4]=function(){return e.updateConfiguration&&e.updateConfiguration.apply(e,arguments)})},null,544),[[n["vModelRadio"],e.selectedStrategy]]),Mt]),Object(n["createElementVNode"])("div",Lt,[Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{name:"strategyRequest",value:"data-driven",class:"form-check-input",type:"radio","onUpdate:modelValue":t[5]||(t[5]=function(t){return e.selectedStrategy=t}),onChange:t[6]||(t[6]=function(){return e.updateConfiguration&&e.updateConfiguration.apply(e,arguments)})},null,544),[[n["vModelRadio"],e.selectedStrategy]]),Ut])])])])])}var It=function(e){Object(m["a"])(r,e);var t=Object(v["a"])(r);function r(){return Object(y["a"])(this,r),t.apply(this,arguments)}return r}(S["b"]);It=Object(O["a"])([Object(S["a"])({name:"ConfigurationPanel",components:{},emits:["updateRequestManager"],props:{requestManagerStringify:String,configurationsList:{type:Array,default:function(){return[{title:"PeakForest",endpoint:"https://peakforest.semantic-metabolomics.fr/sparql",type:"url",mimetype:"application/sparql-query"},{title:"Metabolomics Endpoint - Metabolights",endpoint:"https://metabolights.semantic-metabolomics.fr/sparql",type:"url",mimetype:"application/sparql-query"},{title:"FORUM Endpoint - Metabolism Knowledge Network Portal",endpoint:"https://forum.semantic-metabolomics.fr/sparql/",type:"url",mimetype:"application/sparql-query"},{title:"Genostack - Metabolights",endpoint:"https://askomics-metabolights-192-168-100-98.vm.openstack.genouest.org/virtuoso/sparql",type:"url",mimetype:"application/sparql-query"},{title:"Metabolights_studies.ttl",endpoint:"https://raw.githubusercontent.com/p2m2/database-files/master/ttl/Metabolights_studies.ttl",type:"file",mimetype:"text/turtle"},{title:"Metabolights_studies_askomics.ttl",endpoint:"https://raw.githubusercontent.com/p2m2/database-files/master/ttl/Metabolights_studies_askomics.ttl",type:"file",mimetype:"text/turtle"}]}},strategy:{type:String,default:"data-driven"}},data:function(){return{selectedimetype:"application/sparql-query",optionsMimetype:[{text:"SPARQL",value:"application/sparql-query"},{text:"Turtle",value:"text/turtle"}],selectedStrategy:this.strategy,selectedEndpoint:""}},mounted:function(){if(this.configurationsList.length<=0)throw"devel : None configuration list is finded.";var e=new oe(this.requestManagerStringify,this).getConfiguration();this.selectedimetype=e.mimetype,this.selectedEndpoint=e.url,this.selectedStrategy=e.strategy},methods:{getUserConfiguration:function(e){var t=new w(e.title);switch(t.mimetype=e.mimetype,e.type){case"url":t.url=e.endpoint;break;case"file":t.file=e.endpoint;break;case"content":t.content=e.endpoint;break;default:t.url=e.endpoint}return t},updateConfiguration:function(e){var t=this;console.log("update:",e);var r,n=this.configurationsList.filter((function(e){return e.endpoint==t.selectedEndpoint}));n.length>0?r=this.getUserConfiguration(n[0]):(r=new w("defined-by-user"),r.url=this.selectedEndpoint,r.mimetype=this.selectedimetype),r.strategy=this.selectedStrategy;var i=new oe(this.requestManagerStringify,this);i.setConfiguration(r),this.$emit("updateRequestManager",i.serialized())}}})],It);var Ft=It;Ft.render=_t;var Gt=Ft,Wt=function(e){Object(m["a"])(r,e);var t=Object(v["a"])(r);function r(){return Object(y["a"])(this,r),t.apply(this,arguments)}return r}(S["b"]);Wt=Object(O["a"])([Object(S["a"])({name:"Configuration",components:{ConfigurationPanel:Gt},data:function(){return{config_list:[]}},computed:{requestManagerStringify:function(){return r("cea6").decompress(this.$route.params.rm)}},methods:{}})],Wt);var zt=Wt;zt.render=kt;var Qt=zt,Jt=[{path:"/builder/:rm",name:"builder",component:it},{path:"/results/:rm",name:"results",component:jt},{path:"/console/:rm",name:"console",component:dt},{path:"/configuration/:rm",name:"configuration",component:Qt}],$t=Object(B["a"])({history:Object(B["b"])("/discovery-queryview/"),routes:Jt}),Yt=$t;[W["a"],W["h"],W["n"],W["c"],W["d"],W["j"],W["o"],W["m"],W["k"]].map((function(e){return G["c"].add(e)}));var Kt=function(e){Object(m["a"])(r,e);var t=Object(v["a"])(r);function r(){return Object(y["a"])(this,r),t.apply(this,arguments)}return r}(S["b"]);Kt=Object(O["a"])([Object(S["a"])({name:"AppView",components:{library:G["c"],FontAwesomeIcon:z["a"]},data:function(){return{requestManagerStringify:"",forwardActive:!1,backwardActive:!1}},created:function(){var e=window.location.search,t=new URLSearchParams(e);if(t.has("hash")){var n=t.get("hash");this.requestManagerStringify=r("cea6").decompress(n),this.builder()}else this.setDefaultStartRequestManager(),this.configuration()},watch:{requestManagerStringify:function(){this.updateHistoryButton()}},methods:{setDefaultStartRequestManager:function(){var e=new w("default_rdf_source");e.mimetype="application/sparql-query",e.url="https://askomics-metabolights-192-168-100-98.vm.openstack.genouest.org/virtuoso/sparql",e.strategy="data-driven",this.requestManagerStringify=oe.getDefault(e,this).serialized()},updateRequestManagerStringify:function(e){this.requestManagerStringify=e,Yt.replace({params:{rm:r("cea6").compress(this.requestManagerStringify)}})},updateHistoryButton:function(){this.forwardActive=oe.forwardIsActive(),this.backwardActive=oe.backwardIsActive()},back:function(){this.updateRequestManagerStringify(oe.backward()),this.updateHistoryButton(),this.$toast.info("backward")},forward:function(){this.updateRequestManagerStringify(oe.forward()),this.updateHistoryButton(),this.$toast.info("forward")},builder:function(){Yt.push({name:"builder",params:{rm:r("cea6").compress(this.requestManagerStringify)}})},getResults:function(){Yt.push({name:"results",params:{rm:r("cea6").compress(this.requestManagerStringify)}})},console:function(){Yt.push({name:"console",params:{rm:r("cea6").compress(this.requestManagerStringify)}})},configuration:function(){Yt.push({name:"configuration",params:{rm:r("cea6").compress(this.requestManagerStringify)}})},copyPermalinkQueryBuilderToClipBoard:function(){var e=r("cea6").compress(this.requestManagerStringify),t=document.location.origin+"/discovery-queryview/?hash="+e,n=this;navigator.clipboard.writeText(t).then((function(){n.$toast.success("query builder url to clipboard !")}),(function(e){n.$toast.error("query builder url to clipboard failed !"),console.error(e)}))},clear:function(){var e=new oe(this.requestManagerStringify,this);e.clear(),this.updateRequestManagerStringify(e.serialized()),this.$toast.info("clear session !")}}})],Kt);var Xt=Kt;Xt.render=d;var Ht=Xt,Zt=r("af56");Object(n["createApp"])(Ht).use(Yt).use(Zt["a"],{position:"top",clear:"40000"}).mount("#app")},cf6b:function(e,t,r){"use strict";r("94cad")},d0cb:function(e,t,r){}});
//# sourceMappingURL=app.abd383d6.js.map